(function(a){a.fn.socialSharePrivacy=function(e){var i={services:{facebook:{status:"on",app_id:"__FB_APP-ID__",dummy_img:"socialshareprivacy/images/dummy_facebook.png",txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Facebook senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_fb_off:"nicht mit Facebook verbunden",txt_fb_on:"mit Facebook verbunden",perma_option:"on",display_name:"Facebook",referrer_track:"",language:"de_DE"},twitter:{status:"on",dummy_img:"socialshareprivacy/images/dummy_twitter.png",txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Twitter senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_twitter_off:"nicht mit Twitter verbunden",txt_twitter_on:"mit Twitter verbunden",perma_option:"on",display_name:"Twitter",referrer_track:"",tweet_text:d},gplus:{status:"on",dummy_img:"socialshareprivacy/images/dummy_gplus.png",txt_info:"2 Klicks f&uuml;r mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie k&ouml;nnen Ihre Empfehlung an Google+ senden. Schon beim Aktivieren werden Daten an Dritte &uuml;bertragen &ndash; siehe <em>i</em>.",txt_gplus_off:"nicht mit Google+ verbunden",txt_plus_on:"mit Google+ verbunden",perma_option:"on",display_name:"Google+",referrer_track:"",language:"de"}},info_link:"http://www.heise.de/ct/artikel/2-Klicks-fuer-mehr-Datenschutz-1333879.html",txt_help:"Wenn Sie diese Felder durch einen Klick aktivieren, werden Informationen an Facebook, Twitter oder Google in die USA &uuml;bertragen und unter Umst&auml;nden auch dort gespeichert. N&auml;heres erfahren Sie durch einen Klick auf das <em>i</em>.",settings_perma:"Dauerhaft aktivieren und Daten&uuml;ber&shy;tragung zustimmen:",cookie_path:"/",cookie_domain:document.location.host,cookie_expires:"365",css_path:"socialshareprivacy/socialshareprivacy.css"};var e=a.extend(true,i,e);if((e.services.facebook.status=="on"&&e.services.facebook.app_id!="__FB_APP-ID__")||e.services.twitter.status=="on"||e.services.gplusone.status=="on"){a("head").append('<link rel="stylesheet" type="text/css" href="'+e.css_path+'" />');a(this).prepend('<ul class="social_share_privacy_area"></ul>');var f=a(".social_share_privacy_area",this);var g=document.location.href;var b=a('link[rel="canonical"]').attr("href");if(b&&b.length>0){if(b.indexOf("http")<0){b=document.location.protocol+"//"+document.location.host+b}g=b}}function h(l,j){var m=decodeURIComponent(l);if(m.length<=j){return l}var k=m.substring(0,j-1).lastIndexOf(" ");m=encodeURIComponent(m.substring(0,k))+"\u2026";return m}function c(k){var j=jQuery('meta[name="'+k+'"]').attr("content");return j?j:""}function d(){var k=c("DC.title");var j=c("DC.creator");if(k.length>0){if(j.length>0){k=k+" - "+j}}else{k=a("title").text()}return encodeURIComponent(k)}return this.each(function(){if(e.services.facebook.status=="on"){if(e.services.facebook.app_id!="__FB_APP-ID__"){var A=encodeURIComponent((e.services.facebook.uri?e.services.facebook.uri:g)+e.services.facebook.referrer_track);var j='<iframe src="http://www.facebook.com/plugins/like.php?locale='+e.services.facebook.language+"&amp;app_id="+e.services.facebook.app_id+"&amp;href="+A+'&amp;send=false&amp;layout=button_count&amp;width=120&amp;show_faces=false&amp;action=recommend&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowTransparency="true"></iframe>';var F='<img src="'+e.services.facebook.dummy_img+'" alt="Facebook &quot;Like&quot;-Dummy" class="fb_like_privacy_dummy" />';f.append('<li class="facebook help_info"><span class="info">'+e.services.facebook.txt_info+'</span><span class="switch off">'+e.services.facebook.txt_fb_off+'</span><div class="fb_like dummy_btn">'+F+"</div></li>");var m=a("li.facebook",f);a("li.facebook div.fb_like img.fb_like_privacy_dummy,li.facebook span.switch",f).live("click",function(){if(m.find("span.switch").hasClass("off")){m.addClass("info_off");m.find("span.switch").addClass("on").removeClass("off").html(e.services.facebook.txt_fb_on);m.find("img.fb_like_privacy_dummy").replaceWith(j)}else{m.removeClass("info_off");m.find("span.switch").addClass("off").removeClass("on").html(e.services.facebook.txt_fb_off);m.find(".fb_like").html(F)}})}else{try{console.log("Fehler: Es ist keine Facebook App-ID hinterlegt.")}catch(D){}}}if(e.services.twitter.status=="on"){var u=e.services.twitter.tweet_text;if(typeof(u)=="function"){u=u()}u=h(u,"120");var z=encodeURIComponent((e.services.twitter.uri?e.services.twitter.uri:g)+e.services.twitter.referrer_track);var v=encodeURIComponent((e.services.twitter.uri?e.services.twitter.uri:g));var s='<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+z+"&amp;counturl="+v+"&amp;text="+u+'&amp;count=horizontal"></iframe>';var w='<img src="'+e.services.twitter.dummy_img+'" alt="&quot;Tweet this&quot;-Dummy" class="tweet_this_dummy" />';f.append('<li class="twitter help_info"><span class="info">'+e.services.twitter.txt_info+'</span><span class="switch off">'+e.services.twitter.txt_twitter_off+'</span><div class="tweet dummy_btn">'+w+"</div></li>");var r=a("li.twitter",f);a("li.twitter div.tweet img,li.twitter span.switch",f).live("click",function(){if(r.find("span.switch").hasClass("off")){r.addClass("info_off");r.find("span.switch").addClass("on").removeClass("off").html(e.services.twitter.txt_twitter_on);r.find("img.tweet_this_dummy").replaceWith(s)}else{r.removeClass("info_off");r.find("span.switch").addClass("off").removeClass("on").html(e.services.twitter.txt_twitter_off);r.find(".tweet").html(w)}})}if(e.services.gplus.status=="on"){var p=(e.services.gplus.uri?e.services.gplus.uri:g)+e.services.gplus.referrer_track;var o='<div class="g-plusone" data-size="medium" data-href="'+p+'"></div><script type="text/javascript">window.___gcfg = {lang: "'+e.services.gplus.language+'"}; (function(){ var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.src = "https://apis.google.com/js/plusone.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })(); <\/script>';var E='<img src="'+e.services.gplus.dummy_img+'" alt="&quot;Google+1&quot;-Dummy" class="gplus_one_dummy" />';f.append('<li class="gplus help_info"><span class="info">'+e.services.gplus.txt_info+'</span><span class="switch off">'+e.services.gplus.txt_gplus_off+'</span><div class="gplusone dummy_btn">'+E+"</div></li>");var x=a("li.gplus",f);a("li.gplus div.gplusone img,li.gplus span.switch",f).live("click",function(){if(x.find("span.switch").hasClass("off")){x.addClass("info_off");x.find("span.switch").addClass("on").removeClass("off").html(e.services.gplus.txt_gplus_on);x.find("img.gplus_one_dummy").replaceWith(o)}else{x.removeClass("info_off");x.find("span.switch").addClass("off").removeClass("on").html(e.services.gplus.txt_gplus_off);x.find(".gplusone").html(E)}})}f.append('<li class="settings_info"><div class="settings_info_menu off perma_option_off"><a href="'+e.info_link+'"><span class="help_info icon"><span class="info">'+e.txt_help+"</span></span></a></div></li>");a(".help_info:not(.info_off)",f).live("mouseenter",function(){var I=a(this);var J=window.setTimeout(function(){a(I).addClass("display")},500);a(this).data("timeout_id",J)});a(".help_info",f).live("mouseleave",function(){var I=a(this).data("timeout_id");window.clearTimeout(I);if(a(this).hasClass("display")){a(this).removeClass("display")}});if(((e.services.facebook.status=="on"&&e.services.facebook.perma_option=="on"&&e.services.facebook.app_id!="__FB_APP-ID__")||(e.services.twitter.status=="on"&&e.services.twitter.perma_option=="on")||(e.services.gplus.status=="on"&&e.services.gplus.perma_option=="on"))&&((a.browser.msie&&a.browser.version>7)||!a.browser.msie)){var C=document.cookie.split(";");var n="{";for(var y=0;y<C.length;y++){var B=C[y].split("=");n+='"'+a.trim(B[0])+'":"'+a.trim(B[1])+'"';if(y<C.length-1){n+=","}}n+="}";n=JSON.parse(n);function l(J,L,N,M,K){var I=new Date();I.setTime(I.getTime()+(N*24*60*60*1000));document.cookie=J+"="+L+"; expires="+I.toUTCString()+"; path="+M+"; domain="+K}function H(J,K){var I=new Date();I.setTime(I.getTime()-100);document.cookie=J+"="+K+"; expires="+I.toUTCString()+"; path="+e.cookie_path+"; domain="+e.cookie_domain}var q=a("li.settings_info",f);q.find(".settings_info_menu").removeClass("perma_option_off");q.find(".settings_info_menu").append('<span class="settings">Einstellungen</span><form><fieldset><legend>'+e.settings_perma+"</legend></fieldset></form>");if(e.services.facebook.status=="on"&&e.services.facebook.perma_option=="on"&&e.services.facebook.app_id!="__FB_APP-ID__"){var k="";n.socialSharePrivacy_facebook=="perma_on"?k=' checked="checked"':k="";q.find("form fieldset").append('<input type="checkbox" name="perma_status_facebook" id="perma_status_facebook"'+k+' /><label for="perma_status_facebook">'+e.services.facebook.display_name+"</label>")}if(e.services.twitter.status=="on"&&e.services.twitter.perma_option=="on"){var G="";n.socialSharePrivacy_twitter=="perma_on"?G=' checked="checked"':G="";q.find("form fieldset").append('<input type="checkbox" name="perma_status_twitter" id="perma_status_twitter"'+G+' /><label for="perma_status_twitter">'+e.services.twitter.display_name+"</label>")}if(e.services.gplus.status=="on"&&e.services.gplus.perma_option=="on"){var t="";n.socialSharePrivacy_gplus=="perma_on"?t=' checked="checked"':t="";q.find("form fieldset").append('<input type="checkbox" name="perma_status_gplus" id="perma_status_gplus"'+t+' /><label for="perma_status_gplus">'+e.services.gplus.display_name+"</label>")}q.find("span.settings").css("cursor","pointer");a(q.find("span.settings"),f).live("mouseenter",function(){var I=window.setTimeout(function(){q.find(".settings_info_menu").removeClass("off").addClass("on")},500);a(this).data("timeout_id",I)});a(q,f).live("mouseleave",function(){var I=a(this).data("timeout_id");window.clearTimeout(I);q.find(".settings_info_menu").removeClass("on").addClass("off")});a(q.find("fieldset input")).live("click",function(J){var K;var I=J.target.id;service=I.substr(I.lastIndexOf("_")+1,I.length);a("#"+J.target.id+":checked").length?K="on":K="off";var L="socialSharePrivacy_"+service;if(K=="on"){l(L,"perma_on",e.cookie_expires,e.cookie_path,e.cookie_domain);a("form fieldset label[for="+I+"]",f).addClass("checked")}else{H(L,"perma_on");a("form fieldset label[for="+I+"]",f).removeClass("checked")}});if(e.services.facebook.status=="on"&&e.services.facebook.perma_option=="on"&&n.socialSharePrivacy_facebook=="perma_on"&&e.services.facebook.app_id!="__FB_APP-ID__"){a("li.facebook span.switch",f).click()}if(e.services.twitter.status=="on"&&e.services.twitter.perma_option=="on"&&n.socialSharePrivacy_twitter=="perma_on"){a("li.twitter span.switch",f).click()}if(e.services.gplus.status=="on"&&e.services.gplus.perma_option=="on"&&n.socialSharePrivacy_gplus=="perma_on"){a("li.gplus span.switch",f).click()}}})}})(jQuery);